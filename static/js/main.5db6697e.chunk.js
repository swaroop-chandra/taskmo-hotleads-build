(this.webpackJsonptaskmo_admin=this.webpackJsonptaskmo_admin||[]).push([[0],{57:function(e,t,n){},58:function(e,t,n){},65:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(15),o=n.n(r),s=(n(57),n(17)),i=(n(58),n(13)),l=n(20),d=n.n(l),u=(n(65),n(11)),j=n(25),p=n.n(j),b=n(1);Object(l.createTheme)("solarized",{text:{primary:"black",secondary:"#b2b2b2"},background:{default:"#f2f2f2"},boxshadow:{default:"5px 5px 30px #DEDEDEBF"},context:{background:"#cb4b16",text:"#FFFFFF"},divider:{default:"#fafafa"},action:{button:"rgba(0,0,0,.54)",hover:"rgba(0,0,0,.08)",disabled:"rgba(0,0,0,.12)"}});var h=Object(u.b)((function(e){return{totalData:e.totalData,acceptedData:e.dateData.orders_placed,deniedData:e.dateData.order_denied}}))((function(e,t){t.api,t.admin;var n=[{name:"Customer ID",selector:function(e){return Object(b.jsxs)("div",{children:["`",e.customer_id,"`"]})},sortable:!0,center:!0,cell:function(e){return Object(b.jsxs)("div",{children:["`",e.customer_id,"`"]})}},{name:"Merchant Number",selector:function(e){return Object(b.jsxs)("div",{children:["`",e.merchant_number,"`"]})},cell:function(e){return Object(b.jsxs)("div",{children:["`",e.merchant_number,"`"]})},sortable:!0,center:!0},{name:"Store Name",selector:function(e){return Object(b.jsxs)("div",{children:["`",e.shop_name,"`"]})},cell:function(e){return Object(b.jsxs)("div",{children:["`",e.shop_name,"`"]})},sortable:!0,center:!0},{name:"order_id",selector:function(e){return Object(b.jsxs)("div",{children:["`",e.order_id,"`"]})},cell:function(e){return Object(b.jsxs)("div",{children:["`",e.order_id,"`"]})},sortable:!0,center:!0}],a=[{name:"Customer ID",selector:function(e){return Object(b.jsxs)("div",{children:["`",e.customer_id,"`"]})},cell:function(e){return Object(b.jsxs)("div",{children:["`",e.customer_id,"`"]})},sortable:!0,center:!0},{name:"Merchant Number",selector:function(e){return Object(b.jsxs)("div",{children:["`",e.merchant_number,"`"]})},cell:function(e){return Object(b.jsxs)("div",{children:["`",e.merchant_number,"`"]})},sortable:!0,center:!0},{name:"Reason",selector:function(e){return Object(b.jsxs)("div",{children:["`",e.reason,"`"]})},cell:function(e){return Object(b.jsxs)("div",{children:["`",e.reason,"`"]})},sortable:!0,center:!0}],c={columns:n,data:e.acceptedData},r={columns:a,data:e.deniedData};return Object(b.jsxs)("div",{className:"table_data",children:[Object(b.jsxs)("div",{className:"card_table",children:[Object(b.jsx)("div",{className:"menu-container",children:Object(b.jsx)("h1",{children:"Accepted"})}),Object(b.jsx)(p.a,Object(i.a)(Object(i.a)({},c),{},{filterPlaceholder:"Search",children:Object(b.jsx)(d.a,{columns:n,data:e.acceptedData,defaultSortFieldId:1,pagination:!0,theme:"solarized"})}))]}),Object(b.jsxs)("div",{className:"card_table",children:[Object(b.jsx)("div",{className:"menu-container",children:Object(b.jsx)("h1",{style:{color:"#ff968d"},children:"Denied"})}),Object(b.jsx)(p.a,Object(i.a)(Object(i.a)({},r),{},{filterPlaceholder:"Search",children:Object(b.jsx)(d.a,{columns:a,data:e.deniedData,defaultSortFieldId:1,pagination:!0,theme:"solarized"})}))]})]})})),m=n(9),O=n.n(m),f=n(14),g=function(e){return function(t){var n=e;t(n?{type:"GET_LOGIN"}:{type:"GET_LOGOUT"})}},_=n(46),x=n(47),v=n(52),y=n(51),N=(n(74),n(48)),k=n.n(N),T="https://nodeapi.taskmo.com/v1/hotleads/check_email",D=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(_.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).responseGoogle=function(t){if(t.accessToken){var n=t.profileObj.email;(function(){var a=Object(f.a)(O.a.mark((function a(){var c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(T,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:n})});case 2:if(!(c=a.sent).ok){a.next=10;break}return a.next=6,c.json();case 6:a.sent.email_status?(e.props.loginFunc(t),console.log("login email true"),e.props.setLoginError("")):(console.log("login email false"),e.props.logoutFunc(),e.props.setLoginError("You don't have access, please contact admin")),a.next=13;break;case 10:console.log("login email false"),e.props.logoutFunc(),e.props.setLoginError("You don't have access, please contact admin");case 13:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}else e.props.logoutFunc()},e}return Object(x.a)(n,[{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(k.a,{clientId:"800470593510-v53lbqn11rmr50tjjk4ah19vqhskutau.apps.googleusercontent.com",buttonText:"Sign In With Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})})}}]),n}(a.Component);n(75);var w=Object(u.b)((function(e){return{loggedin:e.loggedin}}))((function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(b.jsxs)("div",{className:"p_login",children:[Object(b.jsx)("div",{className:"log_col1",children:Object(b.jsx)("img",{src:window.location.origin+"/images/hot_lead_login.png",alt:"login",className:"login_bg"})}),Object(b.jsxs)("div",{className:"log_col2",children:[Object(b.jsx)("h1",{className:"log_name",children:"Taskmo HOT-Leads"}),Object(b.jsx)("div",{className:"login_button",children:Object(b.jsx)(D,{loginFunc:function(t){localStorage.setItem("asm_token",t.accessToken),localStorage.setItem("asm_token_email",t.profileObj.email),e.dispatch(g(!0))},logoutFunc:function(){e.dispatch(g(!1)),localStorage.removeItem("asm_token"),localStorage.removeItem("asm_token_email")},setLoginError:r})}),Object(b.jsx)("div",{style:{marginTop:"10px"},children:c})]})]})})),E=n(3),F=n(49),I=n.n(F).a.create({baseURL:"https://api.taskmo.in/"}),S=function(e){return function(t){console.log(e,"fse_id_redux"),function(){var n=Object(f.a)(O.a.mark((function n(){var a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,I.post("".concat(e,"/lead_stats"));case 3:a=n.sent,t({type:"GET_TOTAL_DATA",payload:a.data.dates}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}()()}},G=function(e){return{type:"GET_PROJECT_NAME",payload:e}};var L=Object(u.b)((function(e){return{totalData:e.totalData,dateData:e.dateData,loggedin:e.loggedin,projName:e.projName}}))((function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(!1),i=Object(s.a)(o,2),l=i[0],d=i[1],u=!1,j=function(t){r(!0),e.dispatch(function(e){return function(t){!function(){var n=Object(f.a)(O.a.mark((function n(){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{t({type:"GET_DATE_DATA",payload:e})}catch(a){console.error(a)}case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}}(t));var n=document.getElementById("drop_down_data");"block"===n.style.display&&(n.style.display="none")},p=function(t){d(!0),e.dispatch(function(e){return function(t){var n=e;n?(t(G(n)),t(S(n))):t(G(""))}}(t));var n=document.getElementById("drop_down_project");"block"===n.style.display&&(n.style.display="none")};return u=!!localStorage.getItem("asm_token"),Object(b.jsx)("div",{className:"App",children:u?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("img",{style:{height:"48px"},src:window.location.origin+"/images/ottLogo.png",alt:"ott",className:"ottLogo"}),Object(b.jsx)("h3",{className:"project_name",children:"Hot Leads"}),Object(b.jsx)("div",{className:"drop1",onClick:function(){return localStorage.removeItem("asm_token"),localStorage.removeItem("asm_token_email"),void e.dispatch(g(!1))},style:{width:"100px",justifyContent:"center"},children:"Logout"})]}),Object(b.jsxs)("div",{className:"hot_row1",children:[Object(b.jsxs)("div",{className:"drop1",children:[Object(b.jsx)("p",{className:"drop_data_p1",onClick:function(){return function(){var e=document.getElementById("drop_down_project");"none"===e.style.display?e.style.display="block":e.style.display="none"}()},children:l?e.projName:"Project"}),Object(b.jsx)("div",{className:"drop_down_project",id:"drop_down_project",style:{display:"none",width:"140px"},children:Object(b.jsx)("p",{className:"drop_p1",onClick:function(e){return p("ninjacart")},children:"ninjacart"})})]}),Object(b.jsxs)("div",{className:"drop1",children:[Object(b.jsx)("p",{className:"drop_data_p1",onClick:function(){return function(){var e=document.getElementById("drop_down_data");"none"===e.style.display?e.style.display="block":e.style.display="none"}()},children:c?e.dateData.dates:"Date"}),Object(b.jsx)("div",{className:"drop_down_data",id:"drop_down_data",style:{display:"none"},children:e.totalData.map((function(e,t){return Object(b.jsx)("p",{className:"drop_p1",onClick:function(t){return j(e)},children:e.dates},t)}))})]})]}),Object(b.jsxs)("div",{className:"hot_row1",children:[Object(b.jsxs)("div",{className:"hot_card1",style:{background:"#7a52ff",border:"1px solid #ac2828"},children:[Object(b.jsx)("p",{className:"hot_p1",children:"Total visited stores"}),Object(b.jsx)("p",{className:"hot_p2",children:c?e.dateData.total_checkins:""})]}),Object(b.jsxs)("div",{className:"hot_card1",style:{background:"#4fdb6f",border:"1px solid #00802a"},children:[Object(b.jsx)("p",{className:"hot_p1",children:"Total orders"}),Object(b.jsx)("p",{className:"hot_p2",children:c?e.dateData.orders_placed.length:""})]}),Object(b.jsxs)("div",{className:"hot_card1",style:{background:"#fa5b4d",border:"1px solid #ac2828"},children:[Object(b.jsx)("p",{className:"hot_p1",children:"Total denied"}),Object(b.jsx)("p",{className:"hot_p2",children:c?e.dateData.order_denied.length:""})]})]}),Object(b.jsx)(E.a,{to:"/dashboard",children:Object(b.jsx)(h,{})})]}):Object(b.jsx)(E.a,{to:"/login",children:Object(b.jsx)(w,{})})})})),A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,97)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))},C=n(23),P=n(21),B=n(50),J=function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_LOGIN":return!0;case"GET_LOGOUT":default:return!1}},M=n(28),R=[],z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOTAL_DATA":return Object(M.a)(t.payload);default:return Object(M.a)(e)}},U={},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATE_DATA":return Object(i.a)({},t.payload);default:return Object(i.a)({},e)}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROJECT_NAME":return t.payload.slice();default:return e.slice()}},Y=function(){return Object(P.c)(Object(P.b)({loggedin:J,totalData:z,dateData:q,projName:H}),Object(P.a)(B.a))}();localStorage.getItem("asm_token")&&Y.dispatch(S());var W=Object(b.jsx)(u.a,{store:Y,children:Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(C.a,{children:Object(b.jsx)(L,{to:"/login"})})})});o.a.render(W,document.getElementById("root")),A()}},[[96,1,2]]]);
//# sourceMappingURL=main.5db6697e.chunk.js.map