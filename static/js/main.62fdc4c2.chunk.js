(this.webpackJsonptaskmo_admin=this.webpackJsonptaskmo_admin||[]).push([[0],{57:function(e,t,a){},58:function(e,t,a){},65:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(15),r=a.n(o),s=(a(57),a(19)),l=(a(58),a(13)),i=a(20),d=a.n(i),u=(a(65),a(11)),j=a(25),b=a.n(j),p=a(1);Object(i.createTheme)("solarized",{text:{primary:"black",secondary:"#b2b2b2"},background:{default:"#f2f2f2"},boxshadow:{default:"5px 5px 30px #DEDEDEBF"},context:{background:"#cb4b16",text:"#FFFFFF"},divider:{default:"#fafafa"},action:{button:"rgba(0,0,0,.54)",hover:"rgba(0,0,0,.08)",disabled:"rgba(0,0,0,.12)"}});var h=Object(u.b)((function(e){return{totalData:e.totalData,acceptedData:e.dateData.orders_placed,deniedData:e.dateData.order_denied}}))((function(e,t){t.api,t.admin;var a=[{name:"Customer ID",selector:"customer_id",sortable:!0,center:!0,cell:function(e){return Object(p.jsx)("div",{children:e.customer_id})}},{name:"Merchant Number",selector:"merchant_number",cell:function(e){return Object(p.jsx)("div",{children:e.merchant_number})},sortable:!0,center:!0},{name:"Store Name",selector:"shop_name",cell:function(e){return Object(p.jsx)("div",{children:e.shop_name})},sortable:!0,center:!0},{name:"order_id",selector:"order_id",cell:function(e){return Object(p.jsx)("div",{children:e.order_id})},sortable:!0,center:!0}],n=[{name:"Customer ID",selector:"customer_id",cell:function(e){return Object(p.jsx)("div",{children:e.customer_id})},sortable:!0,center:!0},{name:"Merchant Number",selector:"merchant_number",cell:function(e){return Object(p.jsx)("div",{children:e.merchant_number})},sortable:!0,center:!0},{name:"Reason",selector:"reason",cell:function(e){return Object(p.jsx)("div",{children:e.reason})},sortable:!0,center:!0}];console.log(e.acceptedData,"data-total");var c={columns:a,data:e.acceptedData},o={columns:n,data:e.deniedData};return Object(p.jsxs)("div",{className:"table_data",children:[Object(p.jsxs)("div",{className:"card_table",children:[Object(p.jsx)("div",{className:"menu-container",children:Object(p.jsx)("h1",{children:"Accepted"})}),Object(p.jsx)(b.a,Object(l.a)(Object(l.a)({},c),{},{export:!1,filterPlaceholder:"Search",children:Object(p.jsx)(d.a,{columns:a,data:e.acceptedData,defaultSortFieldId:1,pagination:!0,theme:"solarized"})}))]}),Object(p.jsxs)("div",{className:"card_table",children:[Object(p.jsx)("div",{className:"menu-container",children:Object(p.jsx)("h1",{style:{color:"#ff968d"},children:"Denied"})}),Object(p.jsx)(b.a,Object(l.a)(Object(l.a)({},o),{},{export:!1,filterPlaceholder:"Search",children:Object(p.jsx)(d.a,{columns:n,data:e.deniedData,defaultSortFieldId:1,pagination:!0,theme:"solarized"})}))]})]})})),m=a(9),g=a.n(m),O=a(14),f=function(e){return function(t){var a=e;t(a?{type:"GET_LOGIN"}:{type:"GET_LOGOUT"})}},x=a(46),_=a(47),v=a(52),y=a(51),k=(a(74),a(48)),N=a.n(k),D="https://nodeapi.taskmo.com/v1/hotleads/check_email",T=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).responseGoogle=function(t){if(t.accessToken){var a=t.profileObj.email;(function(){var n=Object(O.a)(g.a.mark((function n(){var c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(D,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:a})});case 2:if(!(c=n.sent).ok){n.next=10;break}return n.next=6,c.json();case 6:n.sent.email_status?(e.props.loginFunc(t),console.log("login email true"),e.props.setLoginError("")):(console.log("login email false"),e.props.logoutFunc(),e.props.setLoginError("You don't have access, please contact admin")),n.next=13;break;case 10:console.log("login email false"),e.props.logoutFunc(),e.props.setLoginError("You don't have access, please contact admin");case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}else e.props.logoutFunc()},e}return Object(_.a)(a,[{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(N.a,{clientId:"800470593510-v53lbqn11rmr50tjjk4ah19vqhskutau.apps.googleusercontent.com",buttonText:"Sign In With Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})})}}]),a}(n.Component);a(75);var w=Object(u.b)((function(e){return{loggedin:e.loggedin}}))((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1];return Object(p.jsxs)("div",{className:"p_login",children:[Object(p.jsx)("div",{className:"log_col1",children:Object(p.jsx)("img",{src:window.location.origin+"/images/hot_lead_login.png",alt:"login",className:"login_bg"})}),Object(p.jsxs)("div",{className:"log_col2",children:[Object(p.jsx)("h1",{className:"log_name",children:"Taskmo HOT-Leads"}),Object(p.jsx)("div",{className:"login_button",children:Object(p.jsx)(T,{loginFunc:function(t){localStorage.setItem("asm_token",t.accessToken),localStorage.setItem("asm_token_email",t.profileObj.email),e.dispatch(f(!0))},logoutFunc:function(){e.dispatch(f(!1)),localStorage.removeItem("asm_token"),localStorage.removeItem("asm_token_email")},setLoginError:o})}),Object(p.jsx)("div",{style:{marginTop:"10px"},children:c})]})]})})),F=a(3);var S=Object(u.b)((function(e){return{totalData:e.totalData,dateData:e.dateData,loggedin:e.loggedin}}))((function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],o=a[1],r=!1,l=function(t){o(!0),e.dispatch(function(e){return function(t){!function(){var a=Object(O.a)(g.a.mark((function a(){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{t({type:"GET_DATE_DATA",payload:e})}catch(n){console.error(n)}case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}}(t));var a=document.getElementById("drop_down_data");"block"===a.style.display&&(a.style.display="none")};return r=!!localStorage.getItem("asm_token"),Object(p.jsx)("div",{className:"App",children:r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("img",{style:{height:"48px"},src:window.location.origin+"/images/ottLogo.png",alt:"ott",className:"ottLogo"}),Object(p.jsx)("h3",{className:"project_name",children:"Hot Leads"}),Object(p.jsx)("div",{className:"drop1",onClick:function(){return localStorage.removeItem("asm_token"),localStorage.removeItem("asm_token_email"),void e.dispatch(f(!1))},style:{width:"100px",justifyContent:"center"},children:"Logout"})]}),Object(p.jsxs)("div",{className:"hot_row1",children:[Object(p.jsx)("div",{className:"drop1",children:Object(p.jsx)("p",{className:"drop_data_p1",children:"Ninja Cart"})}),Object(p.jsxs)("div",{className:"drop1",children:[Object(p.jsx)("p",{className:"drop_data_p1",onClick:function(){return function(){var e=document.getElementById("drop_down_data");"none"===e.style.display?e.style.display="block":e.style.display="none"}()},children:c?e.dateData.dates:"Date"}),Object(p.jsx)("div",{className:"drop_down_data",id:"drop_down_data",style:{display:"none"},children:e.totalData.map((function(e,t){return Object(p.jsx)("p",{className:"drop_p1",onClick:function(t){return l(e)},children:e.dates},t)}))})]})]}),Object(p.jsxs)("div",{className:"hot_row1",children:[Object(p.jsxs)("div",{className:"hot_card1",style:{background:"#7a52ff",border:"1px solid #ac2828"},children:[Object(p.jsx)("p",{className:"hot_p1",children:"Total visited stores"}),Object(p.jsx)("p",{className:"hot_p2",children:c?e.dateData.total_checkins:""})]}),Object(p.jsxs)("div",{className:"hot_card1",style:{background:"#4fdb6f",border:"1px solid #00802a"},children:[Object(p.jsx)("p",{className:"hot_p1",children:"Total orders"}),Object(p.jsx)("p",{className:"hot_p2",children:c?e.dateData.orders_placed.length:""})]}),Object(p.jsxs)("div",{className:"hot_card1",style:{background:"#fa5b4d",border:"1px solid #ac2828"},children:[Object(p.jsx)("p",{className:"hot_p1",children:"Total denied"}),Object(p.jsx)("p",{className:"hot_p2",children:c?e.dateData.order_denied.length:""})]})]}),Object(p.jsx)(F.a,{to:"/dashboard",children:Object(p.jsx)(h,{})})]}):Object(p.jsx)(F.a,{to:"/login",children:Object(p.jsx)(w,{})})})})),E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,97)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),o(e),r(e)}))},I=a(23),L=a(21),G=a(49),A=function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_LOGIN":return!0;case"GET_LOGOUT":default:return!1}},C=a(28),P=[],B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOTAL_DATA":return Object(C.a)(t.payload);default:return Object(C.a)(e)}},z={},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATE_DATA":return Object(l.a)({},t.payload);default:return Object(l.a)({},e)}},M=function(){return Object(L.c)(Object(L.b)({loggedin:A,totalData:B,dateData:J}),Object(L.a)(G.a))},U=a(50),q=a.n(U).a.create({baseURL:"https://api.taskmo.in/ninjacart"}),H=M();localStorage.getItem("asm_token")&&H.dispatch((function(e){!function(){var t=Object(O.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.post("/lead_stats");case 3:a=t.sent,e({type:"GET_TOTAL_DATA",payload:a.data.dates}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()}));var R=Object(p.jsx)(u.a,{store:H,children:Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(I.a,{children:Object(p.jsx)(S,{to:"/dashboard"})})})});r.a.render(R,document.getElementById("root")),E()}},[[96,1,2]]]);
//# sourceMappingURL=main.62fdc4c2.chunk.js.map