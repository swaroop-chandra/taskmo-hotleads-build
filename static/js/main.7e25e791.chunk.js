(this.webpackJsonptaskmo_admin=this.webpackJsonptaskmo_admin||[]).push([[0],{191:function(e,t,a){},192:function(e,t,a){},198:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},226:function(e,t,a){},238:function(e,t,a){},242:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(13),r=a.n(o),s=(a(191),a(21)),i=(a(192),a(8)),l=a(110),d=a.n(l),j=(a(198),a(31)),u=a(121),b=a.n(u),h=a(2);Object(l.createTheme)("solarized",{text:{primary:"black",secondary:"#fff"},background:{default:"#fff"},boxshadow:{default:"5px 5px 30px #fff"},context:{background:"#fff",text:"#FFFFFF"},divider:{default:"#fff"},action:{button:"rgba(0,0,0,.54)",hover:"rgba(0,0,0,.08)",disabled:"rgba(0,0,0,.12)"}});var m=Object(j.b)((function(e){return{totalData:e.totalData,acceptedData:e.totalData.accepted,deniedData:e.totalData.denied}}))((function(e,t){t.api,t.admin;var a=Object(n.useState)(!0),c=Object(s.a)(a,2),o=c[0],r=c[1],l=[{name:"Customer ID",selector:"customer_id",sortable:!0,center:!0,cell:function(e){return Object(h.jsx)("div",{children:e.customer_id})}},{name:"Merchant Number",selector:"merchant_number",cell:function(e){return Object(h.jsx)("div",{children:e.merchant_number})},sortable:!0,center:!0},{name:"Store Name",selector:"shop_name",cell:function(e){return Object(h.jsx)("div",{children:e.shop_name})},sortable:!0,center:!0},{name:"Order Id",selector:"order_id",cell:function(e){return Object(h.jsx)("div",{children:"null"===e.order_id?"-":e.order_id})},sortable:!0,center:!0}],j=[{name:"Customer ID",selector:"customer_id",cell:function(e){return Object(h.jsx)("div",{children:e.customer_id})},sortable:!0,center:!0},{name:"Merchant Number",selector:"merchant_number",cell:function(e){return Object(h.jsx)("div",{children:e.merchant_number})},ordering:!0,sortable:!0,center:!0},{name:"Reason",selector:"reason",cell:function(e){return Object(h.jsx)("div",{children:e.reason})},sortable:!0,center:!0}],u={columns:l,data:e.acceptedData},m={columns:j,data:e.deniedData};return Object(h.jsxs)("div",{className:"table_data",children:[Object(h.jsxs)("div",{className:"menu-container",children:[Object(h.jsx)("h1",{style:o?{color:"#4858e9"}:{color:"#979797"},onClick:function(){r(!0)},children:"Accepted"}),Object(h.jsx)("h1",{style:o?{color:"#979797",marginLeft:"130px"}:{color:"#ff968d",marginLeft:"130px"},onClick:function(){r(!1)},children:"Denied"})]}),o?Object(h.jsx)("div",{className:"card_table",id:"card_table_accepted",children:Object(h.jsx)(b.a,Object(i.a)(Object(i.a)({},u),{},{filterPlaceholder:"Search",children:Object(h.jsx)(d.a,{columns:l,data:e.acceptedData,defaultSortFieldId:1,pagination:!0,theme:"solarized"})}))}):Object(h.jsx)("div",{className:"card_table",id:"card_table_denied",children:Object(h.jsx)(b.a,Object(i.a)(Object(i.a)({},m),{},{filterPlaceholder:"Search",children:Object(h.jsx)(d.a,{columns:j,data:e.deniedData,defaultSortFieldId:1,pagination:!0,theme:"solarized"})}))})]})})),O=a(33),g=a.n(O),p=a(48),f=a(92),v=a(93),_=a(105),x=a(104),y=(a(207),a(156)),N=a.n(y),w="https://nodeapi.taskmo.com/v1/hotleads/check_email",k=function(e){Object(_.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).responseGoogle=function(t){if(t.accessToken){var a=t.profileObj.email;(function(){var n=Object(p.a)(g.a.mark((function n(){var c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(w,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:a})});case 2:if(!(c=n.sent).ok){n.next=10;break}return n.next=6,c.json();case 6:n.sent.email_status?(e.props.loginFunc(t),console.log("login email true"),e.props.setLoginError("")):(console.log("login email false"),e.props.logoutFunc(),e.props.setLoginError("You don't have access, please contact admin")),n.next=13;break;case 10:console.log("login email false"),e.props.logoutFunc(),e.props.setLoginError("You don't have access, please contact admin");case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}else e.props.logoutFunc()},e}return Object(v.a)(a,[{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(N.a,{clientId:"800470593510-v53lbqn11rmr50tjjk4ah19vqhskutau.apps.googleusercontent.com",buttonText:"Sign In With Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})})}}]),a}(n.Component),T=function(e){return function(t){var a=e;t(a?{type:"GET_LOGIN"}:{type:"GET_LOGOUT"})}};a(208);var D=Object(j.b)((function(e){return{loggedin:e.loggedin}}))((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1];return Object(h.jsxs)("div",{className:"p_login",children:[Object(h.jsx)("div",{className:"log_col1",children:Object(h.jsx)("img",{src:window.location.origin+"/images/hot_lead_login.png",alt:"login",className:"login_bg"})}),Object(h.jsxs)("div",{className:"log_col2",children:[Object(h.jsx)("h1",{className:"log_name",children:"Taskmo HOT-Leads"}),Object(h.jsx)("div",{className:"login_button",children:Object(h.jsx)(k,{loginFunc:function(t){localStorage.setItem("asm_token",t.accessToken),localStorage.setItem("asm_token_email",t.profileObj.email),e.dispatch(T(!0))},logoutFunc:function(){e.dispatch(T(!1)),localStorage.removeItem("asm_token"),localStorage.removeItem("asm_token_email")},setLoginError:o})}),Object(h.jsx)("div",{style:{marginTop:"10px"},children:c})]})]})})),F=a(19),S=a(281),E=a(284),M=a(285),I=a(279),C=a(282),L=a(270),Y=a(164),A=a(24),G=a(280),H=a(157),P=a.n(H).a.create({baseURL:"https://nodeapi.taskmo.com/v1/hotleads"}),R=function(e){return{type:"GET_TOTAL_DATA",payload:e}},W=function(e,t){return function(a){(function(){var n=Object(p.a)(g.a.mark((function n(){var c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.get("lead_stats?date=".concat(e,"&project_name=").concat(t));case 3:c=n.sent,a(R(c.data.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}})()()}},B=a(53),J=a.n(B);a(226);var z=Object(j.b)((function(e){return{projName:e.projName}}))((function(e){var t=c.a.useState(new Date),a=Object(s.a)(t,2),n=a[0],o=a[1];return Object(h.jsx)(A.a,{utils:Y.a,children:Object(h.jsx)(L.a,{container:!0,justifyContent:"space-around",children:Object(h.jsx)(G.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Date picker inline",value:n,onChange:function(t){o(t);var a={date:J()(t).format("DD/MM/YYYY")},n=e.projName;e.dispatch(function(e,t){return function(a){!function(){var n=Object(p.a)(g.a.mark((function n(){var c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{c=e.date,a(W(c,t))}catch(o){console.error(o)}case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}}(a,n))},KeyboardButtonProps:{"aria-label":"change date"}})})})})),U=a(162),q=(a(236),a(237),a(80)),K=a(124),Q=(a(238),function(e){return{type:"FROM_TO_DATA",payload:e}}),V=function(e){return function(t){var a=e;t(a?{type:"SHOW_ON"}:{type:"SHOW_OFF"})}};var X=Object(j.b)((function(e){return{projName:e.projName,show:e.show}}))((function(e){var t=Object(n.useState)([{startDate:new Date,endDate:new Date,key:"selection"}]),a=Object(s.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(!1),i=Object(s.a)(r,2),l=(i[0],i[1]),d=function(){e.dispatch(V(!1))};return console.log(e.show,"show"),Object(h.jsx)("div",{className:"modal_form",children:Object(h.jsxs)(q.a,{show:e.show,onHide:d,children:[Object(h.jsx)(q.a.Header,{closeButton:!0,children:Object(h.jsx)(q.a.Title,{children:"Modal heading"})}),Object(h.jsx)(q.a.Body,{children:Object(h.jsx)(U.DateRangePicker,{onChange:function(e){return o([e.selection])},showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:2,ranges:c,direction:"horizontal"})}),Object(h.jsxs)(q.a.Footer,{children:[Object(h.jsx)(K.a,{variant:"secondary",onClick:d,children:"Close"}),Object(h.jsx)(K.a,{variant:"primary",onClick:function(t){var a={start:J()(c[0].startDate).format("DD/MM/YYYY"),end:J()(c[0].endDate).format("DD/MM/YYYY")},n=e.projName;e.dispatch(function(e,t){return function(a){!function(){var n=Object(p.a)(g.a.mark((function n(){var c,o,r;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c={data:e.start},e.start!==e.end){n.next=10;break}return n.next=5,P.get("lead_stats?date=".concat(e.start,"&project_name=").concat(t));case 5:o=n.sent,a(R(o.data.data)),a(Q(c)),n.next=15;break;case 10:return n.next=12,P.get("lead_stats_range?from_date=".concat(e.start,"&to_date=").concat(e.end,"&project_name=").concat(t));case 12:r=n.sent,a(R(r.data.data)),a(Q(e));case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),console.error(n.t0);case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(){return n.apply(this,arguments)}}()()}}(a,n)),l(!1)},children:"Save Changes"})]})]})})})),Z=a(273),$=function(e){return{type:"GET_PROJECT_NAME",payload:e}},ee=function(e){return function(t){var a=e;t($(a||""))}},te=a(275),ae=Object(Z.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));var ne=Object(j.b)((function(e){return{totalData:e.totalData,dateData:e.dateData,loggedin:e.loggedin,projName:e.projName,fromTo:e.fromTo}}))((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=(a[0],a[1]),o=Object(n.useState)(""),r=Object(s.a)(o,2),i=r[0],l=r[1],d=Object(n.useState)(!0),j=Object(s.a)(d,2),u=j[0],b=j[1],O=Object(n.useState)(!0),g=Object(s.a)(O,2),p=g[0],f=g[1];Object(n.useEffect)((function(){var t=new Date,a=J()(t).format("DD/MM/YYYY"),n="ninjacart";e.dispatch(ee(n)),e.dispatch(W(a,n))}),[]);var v=!1,_=ae();return v=!!localStorage.getItem("asm_token"),Object(h.jsx)("div",{className:"App",children:v?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("img",{style:{height:"48px"},src:window.location.origin+"/images/logo/TaskmoOTTFinal.svg",alt:"ott",className:"ottLogo"}),Object(h.jsx)("h3",{className:"project_name",style:{color:"#673695"},children:"Hot Leads"}),Object(h.jsxs)("div",{className:"logout_box",onClick:function(){return localStorage.removeItem("asm_token"),localStorage.removeItem("asm_token_email"),void e.dispatch(T(!1))},children:[Object(h.jsx)("img",{src:window.location.origin+"/images/logo/logout_black.svg",alt:"ott",className:"logout_ott"}),"Logout"]})]}),Object(h.jsxs)("div",{className:"hot_row1",children:[Object(h.jsx)("div",{children:Object(h.jsx)(S.a,{sx:{minWidth:120},children:Object(h.jsxs)(I.a,{variant:"outlined",className:_.formControl,children:[Object(h.jsx)(E.a,{id:"demo-simple-select-label1",children:p?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{src:window.location.origin+"/images/logo/ninjacart.svg",alt:"ott",className:"logo_drop"}),"Ninjacart"]}):"Project"}),Object(h.jsxs)(C.a,{labelId:"demo-simple-select-label1",id:"demo-simple-select",value:i,label:"project",onChange:function(t){l(t.target.value);var a=t.target.value;e.dispatch(ee(a));var n=new Date,c=J()(n).format("DD/MM/YYYY");e.dispatch(W(c,a)),f(!1),b(!0),e.dispatch({type:"RESET_FROM_TO"})},children:[Object(h.jsxs)(M.a,{value:"ninjacart",children:[Object(h.jsx)("img",{src:window.location.origin+"/images/logo/ninjacart.svg",alt:"ott",className:"logo_drop"}),"Ninjacart"]}),Object(h.jsxs)(M.a,{value:"jiomart",children:[Object(h.jsx)("img",{src:window.location.origin+"/images/logo/jio_mart_logo.svg",alt:"ott",className:"logo_drop"}),"JioMart"]})]})]})})}),Object(h.jsxs)("div",{id:"date_selector",children:[Object.keys(e.fromTo).length>1?Object(h.jsxs)("div",{id:"show_range_dates",className:"show_range_dates",children:[Object(h.jsx)("p",{className:"show_start",children:e.fromTo.start}),Object(h.jsx)("p",{className:"show_start",children:"-"}),Object(h.jsx)("p",{className:"show_start",children:e.fromTo.end})]}):1===Object.keys(e.fromTo).length?Object(h.jsx)("div",{id:"show_range_dates",className:"show_range_dates",children:Object(h.jsx)("p",{className:"show_start",children:e.fromTo.data})}):Object(h.jsx)(h.Fragment,{}),Object(h.jsx)(S.a,{sx:{minWidth:120,marginTop:"20px"},onBlur:function(){var e=document.getElementById("MyForm_id");"block"===e.style.display&&(e.style.display="none")},children:Object(h.jsx)(te.a,{variant:"outlined",onClick:function(t){c(t.target.value),b(!1),e.dispatch(V(!0))},children:u?"Today":"Select Date"})}),Object(h.jsx)("div",{id:"MyForm_id",style:{display:"none"},children:Object(h.jsx)(z,{})}),Object(h.jsx)("div",{id:"formMy_id",style:{display:"none"},children:Object(h.jsx)(X,{})})]})]}),Object(h.jsxs)("div",{className:"hot_row1",children:[Object(h.jsxs)("div",{className:"hot_card1",style:{backgroundImage:"url(".concat(window.location.origin+"/images/HotLeadDashboard/purple.svg",")")},children:[Object(h.jsx)("div",{className:"round_back",children:Object(h.jsx)("p",{className:"hot_p2",children:e.totalData.total_visited})}),Object(h.jsx)("p",{className:"hot_p1",children:"Total visited stores"})]}),Object(h.jsxs)("div",{className:"hot_card1",style:{backgroundImage:"url(".concat(window.location.origin+"/images/HotLeadDashboard/blue.svg",")")},children:[Object(h.jsx)("div",{className:"round_back",children:Object(h.jsx)("p",{className:"hot_p2",style:{color:"#64abdd"},children:e.totalData.total_checkins?e.totalData.total_checkins:"NA"})}),Object(h.jsx)("p",{className:"hot_p1",children:"Total checkins"})]}),Object(h.jsxs)("div",{className:"hot_card1",style:{backgroundImage:"url(".concat(window.location.origin+"/images/HotLeadDashboard/green.svg",")")},children:[Object(h.jsx)("div",{className:"round_back",children:Object(h.jsx)("p",{className:"hot_p2",style:{color:"#00a88b"},children:e.totalData.total_accepted})}),Object(h.jsx)("p",{className:"hot_p1",children:"Total orders"})]}),Object(h.jsxs)("div",{className:"hot_card1",style:{backgroundImage:"url(".concat(window.location.origin+"/images/HotLeadDashboard/red.svg",")")},children:[Object(h.jsx)("div",{className:"round_back",children:Object(h.jsx)("p",{className:"hot_p2",style:{color:"#d93535"},children:e.totalData.total_denied})}),Object(h.jsx)("p",{className:"hot_p1",children:"Total denied"})]})]}),Object(h.jsx)(F.a,{to:"/dashboard",children:Object(h.jsx)(m,{})})]}):Object(h.jsx)(F.a,{to:"/login",children:Object(h.jsx)(D,{})})})})),ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,290)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),o(e),r(e)}))},oe=a(118),re=a(111),se=a(163),ie=function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_LOGIN":return!0;case"GET_LOGOUT":default:return!1}},le={},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOTAL_DATA":return Object(i.a)({},t.payload);default:return Object(i.a)({},e)}},je={},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATE_DATA":return Object(i.a)({},t.payload);default:return Object(i.a)({},e)}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROJECT_NAME":return t.payload.slice();default:return e.slice()}},he={},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FROM_TO_DATA":return Object(i.a)({},t.payload);case"RESET_FROM_TO":return{};default:return Object(i.a)({},e)}},Oe=function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_ON":return!0;case"SHOW_OFF":default:return!1}},ge=function(){return Object(re.c)(Object(re.b)({loggedin:ie,totalData:de,dateData:ue,projName:be,fromTo:me,show:Oe}),Object(re.a)(se.a))}(),pe=Object(h.jsx)(j.a,{store:ge,children:Object(h.jsx)(oe.a,{children:Object(h.jsx)(ne,{to:"/login"})})});r.a.render(pe,document.getElementById("root")),ce()}},[[242,1,2]]]);
//# sourceMappingURL=main.7e25e791.chunk.js.map